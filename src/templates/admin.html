<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - PDF Chatbot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin/admin.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body class="protected-page">
    <div class="app-container" id="admin-panel">
        <header>
            <h1>PDF Chatbot Admin</h1>
            <div class="header-actions">
                <a href="/" class="nav-link">Chat</a>
                <button id="logout-btn" class="logout-btn">Logout</button>
                <div class="theme-toggle">
                    <button id="theme-toggle-btn">
                        <span class="light-icon">‚òÄÔ∏è</span>
                        <span class="dark-icon">üåô</span>
                    </button>
                </div>
            </div>
        </header>

        <main>
            <div class="admin-controls">
                <button id="refresh-analytics" class="action-btn">Refresh Data</button>
            </div>
            <div class="admin-section">
                <h2>Users</h2>
                <ul id="user-list" class="admin-list">Loading users...</ul>
            </div>
            <div class="admin-section">
                <h2>Documents</h2>
                <ul id="document-list" class="admin-list">Loading documents...</ul>
            </div>
            <div class="admin-section">
                <h2>System Info</h2>
                <ul>
                    <li>App Version: 1.0</li>
                    <li>Server Time: <span id="server-time">--</span></li>
                </ul>
            </div>
            <div class="admin-section">
                <h2>Analytics</h2>
                <div id="analytics-data" class="analytics-container">Analytics coming soon...</div>
            </div>
        </main>

        <footer>
            <div class="info">
                <p>PDF Chatbot Admin | <span id="status-indicator">Ready</span></p>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script>
        // Logout button
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('logout-btn').addEventListener('click', function() {
                fetch('/api/logout', { method: 'POST', credentials: 'same-origin' })
                  .then(() => window.location.href = '/login');
            });
        });
    </script>
    <script>
    // Placeholder: Fetch and render admin data
    document.addEventListener('DOMContentLoaded', function() {
        // Fetch users
        fetch('/api/admin/users', { credentials: 'same-origin' })
            .then(res => res.json()).then(data => {
                const users = data.users || [];
                const userList = document.getElementById('user-list');
                if (userList) {
                    userList.innerHTML = users.map(u => `<li>${u.username} (${u.email || ''})${u.is_admin ? ' <b>[admin]</b>' : ''}</li>`).join('');
                }
            });
        // Fetch documents
        fetch('/api/documents/list', { credentials: 'same-origin' })
            .then(res => res.json()).then(data => {
                const docs = data.documents || data || [];
                const docList = document.getElementById('document-list');
                if (docList) {
                    docList.innerHTML = docs.map(d => `<li>${d.filename || d.name}</li>`).join('');
                }
            });
    });
    </script>
</body>
</html>

